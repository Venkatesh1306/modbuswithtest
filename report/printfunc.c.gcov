        -:    0:Source:D:/Project_mp/testfinal/test/printfunc.c
        -:    0:Programs:14
        -:    1:#include "testhead.h"
        -:    2:
       21:    3:void printfunction()
        -:    4:{   
       21:    5:    printf(ANSI_COLOR_RESET "\nQuery Packet:%d", incrs + 1);
        -:    6:
       21:    7:    if (ModbusTxBuf[7] > 0x80)
        -:    8:    {
       13:    9:        switch (ModbusTxBuf[8])
        -:   10:        {
        -:   11:        case 1:
        1:   12:            printf(ANSI_COLOR_ORANGE " - Function Error ");
        1:   13:            break;
        -:   14:        case 2:
        8:   15:            printf(ANSI_COLOR_ORANGE " - Address Error ");
        8:   16:            break;
        -:   17:        case 3:
        4:   18:            printf(ANSI_COLOR_ORANGE " - Data Error ");
        4:   19:            break;
        -:   20:        }
        -:   21:    }
        -:   22:
        -:   23:#ifdef result
        -:   24:
       21:   25:    printf(ANSI_COLOR_RESET "\n");
       21:   26:    printf("Number of packets to send: %d\n", ModbusTxLength);
        -:   27:
      302:   28:    for (int i = 0; i < ModbusRxBuftest[incrs][0]; i++)
      281:   29:        printf("%02X ", ModbusRxBuf[i]);
       21:   30:    printf("\n");
        -:   31:
       21:   32:    printf("Expected Response:\n");
      235:   33:    for (int i = 0; i < Test_TXtest[incrs][0]; i++)
      214:   34:        printf("%02X ", Test_tx[i]);
       21:   35:    printf("\n");
        -:   36:
       21:   37:    printf("Actual Response:\n");
       21:   38:    int responseLength = (ModbusTxBuf[7] == 0x06 || ModbusTxBuf[7] == 0x10 || ModbusTxBuf[7] == 0x05 || ModbusTxBuf[7] == 0x0f) ? 0x0C : ((ModbusTxBuf[7] < 0x80) ? 0x09 + ModbusTxBuf[8] : 0x09);
      235:   39:    for (int i = 0; i < responseLength; i++)
      214:   40:        printf("%02X ", ModbusTxBuf[i]);
       21:   41:    printf("\n");
        -:   42:
        -:   43:#endif
        -:   44:
       21:   45:    printf(Test_Res == 1 ? ANSI_COLOR_GREEN " Test Passed" : ANSI_COLOR_RED " Test failed\n");
        -:   46:
       21:   47:    if (ModbusRxBuf[7] == 0x6 || ModbusRxBuf[7] == 0x10 || ModbusTxBuf[7] == 0x05 || ModbusRxBuf[7] == 0x0f)
        -:   48:       
       10:   49:        printf(test_c == 1 ? ANSI_COLOR_RED " - Data not Entered" : ANSI_COLOR_GREEN " - Data Entered");
        -:   50:
       21:   51:    printf("\n");
       21:   52:    printf(ANSI_COLOR_RESET); // Reset color to default
        -:   53:
       21:   54:}
