        -:    0:Source:D:/Project_mp/testfinal/test/test.c
        -:    0:Programs:11
        -:    1:/*
        -:    2: * File:   test.c
        -:    3: * Author: Green2
        -:    4: *
        -:    5: * Created on 9 April, 2024, 11:13 AM
        -:    6: * developed for testing the inputs
        -:    7: */
        -:    8:
        -:    9:#include "testhead.h"
        -:   10:// recived packet frame
        -:   11:unsigned char ModbusTcpRxBuftest[INR_SIZE][100] = {
        -:   12:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x06, 0x00, 0x03, 0x03, 0x04},
        -:   13:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x03, 0x00, 0x09, 0x00, 0x03},
        -:   14:    {0x11, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x10, 0x00, 0x06, 0x00, 0x02, 0x04, 0x03, 0x04, 0x3c, 0x7e},
        -:   15:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x09, 0x00, 0x07, 0x00, 0x06},
        -:   16:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x03, 0x00, 0x28, 0x00, 0x03},
        -:   17:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x06, 0x00, 0x27, 0x00, 0x06},
        -:   18:    {0x0e, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x10, 0x00, 0x30, 0x00, 0x01, 0x00, 0x03},
        -:   19:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x06, 0x00, 0x09, 0xff, 0xff},
        -:   20:    {0x13, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x10, 0x00, 0x0C, 0x00, 0x03, 0x06, 0xff, 0xff, 0x06, 0x05, 0x06, 0x05},
        -:   21:    {0x13, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x10, 0x00, 0x0C, 0x00, 0x03, 0x06, 0x00, 0x06, 0x06, 0x05, 0x06, 0x05},
        -:   22:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x01, 0x00, 0x03, 0x00, 0x09},
        -:   23:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x06, 0x00, 0x03, 0xff, 0x00}};
        -:   24:
        -:   25:unsigned char Test_TXtest[INR_SIZE][100] = {
        -:   26:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x06, 0x00, 0x03, 0x03, 0x04},
        -:   27:    {0xf, 0x00, 0x01, 0x00, 0x02, 0x00, 0x09, 0x03, 0x03, 0x6, 0x3c, 0x7e, 0x03, 0x02, 0xFF, 0xFF},
        -:   28:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x10, 0x00, 0x06, 0x00, 0x02},
        -:   29:    {0x09, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x89, 0x01},
        -:   30:    {0x09, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x83, 0x02},
        -:   31:    {0x09, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x86, 0x02},
        -:   32:    {0x09, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x90, 0x02},
        -:   33:    {0x09, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x86, 0x03},
        -:   34:    {0x09, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x90, 0x03},
        -:   35:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x10, 0x00, 0x0C, 0x00, 0x03},
        -:   36:    {0x0b, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x01, 0x02, 0xE0, 0x01},
        -:   37:    {0x0c, 0x00, 0x01, 0x00, 0x02, 0x00, 0x06, 0x03, 0x06, 0x00, 0x03, 0xff, 0x00}};
        -:   38:// Data register
        -:   39:unsigned short int Dataregister[100] = {0xff00, 0x00ff, 0x0000, 0xFFFF, 0x00ff, 0x00ff, 0x00ff, 0xff00, 0x3A2B, 0x3c7e, 0x0302, 0xFFFF, 0x1123, 0x1321, 0x3A2B, 0x3c7e, 0x0065, 0x2217, 0x1123, 0x1321, 0x3A2B, 0x3c7e, 0x0065, 0x2217, 0x1123, 0x1321, 0x3A2B, 0x3c7e, 0x0065, 0x2217, 0x1123, 0x1321, 0x3A2B, 0x3c7e};
        -:   40:
        -:   41:/*
        -:   42:main function for testing
        -:   43:generates the expected frame by cosidering the ModbusTcpRxBuf
        -:   44:stores the frame in Test_TX
        -:   45:finally checks the expected and actual outputs are same
        -:   46:expected -- Test_Tx
        -:   47:*/
        1:   48:int main()
        -:   49:{
        -:   50:   int j;
        -:   51:
       13:   52:   for (inc = 0; inc < INR_SIZE; inc++)
        -:   53:   {
        -:   54:
      189:   55:      for (j = 0; j <= ModbusTcpRxBuftest[inc][0]; j++)
        -:   56:      {
      177:   57:         ModbusTcpRxBuf[j] = ModbusTcpRxBuftest[inc][j + 1];
        -:   58:      }
      152:   59:      for (j = 0; j <= Test_TXtest[inc][0]; j++)
        -:   60:      {
      140:   61:         Test_TX[j] = Test_TXtest[inc][j + 1];
        -:   62:      }
        -:   63:
       12:   64:      frame_function(&ModbusTcpRxBuf[0], &Dataregister[0], &parse, &ModbusTcpTxBuf[0], &ModbusTxLength); // main call function
       12:   65:      Test_ing(ModbusTcpTxBuf, Test_TX);                                                                 // comparing expected and actual frame
       12:   66:      printfunction();                                                                                   // printing the output
        -:   67:   }
        -:   68:}
