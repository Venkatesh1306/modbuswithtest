        -:    0:Source:D:/Project_mp/testfinal/test/printfunc.c
        -:    0:Programs:14
        -:    1:#include "testhead.h"
        -:    2:
        3:    3:void printfunction()
        -:    4:{
        3:    5:    printf(ANSI_COLOR_RESET "\nQuery Packet:%d", inc + 1);
        -:    6:
        3:    7:    if (ModbusTcpTxBuf[7] > 0x80)
        -:    8:    {
    #####:    9:        switch (ModbusTcpTxBuf[8])
        -:   10:        {
        -:   11:        case 1:
    #####:   12:            printf(ANSI_COLOR_ORANGE " - Function Error ");
    #####:   13:            break;
        -:   14:        case 2:
    #####:   15:            printf(ANSI_COLOR_ORANGE " - Address Error ");
    #####:   16:            break;
        -:   17:        case 3:
    #####:   18:            printf(ANSI_COLOR_ORANGE " - Data Error ");
    #####:   19:            break;
        -:   20:        }
        -:   21:    }
        -:   22:
        -:   23:#ifdef result
        -:   24:
        3:   25:    printf(ANSI_COLOR_RESET "\n");
        3:   26:    printf("Number of packets to send: %d\n", ModbusTxLength);
        -:   27:
       44:   28:    for (int i = 0; i < ModbusTcpRxBuftest[inc][0]; i++)
       41:   29:        printf("%02X ", ModbusTcpRxBuf[i]);
        3:   30:    printf("\n");
        -:   31:
        3:   32:    printf("Expected Response:\n");
       38:   33:    for (int i = 0; i < Test_TXtest[inc][0]; i++)
       35:   34:        printf("%02X ", Test_TX[i]);
        3:   35:    printf("\n");
        -:   36:
        3:   37:    printf("Actual Response:\n");
        3:   38:    int responseLength = (ModbusTcpTxBuf[7] == 0x06 || ModbusTcpTxBuf[7] == 0x10 || ModbusTcpTxBuf[7] == 0x05 || ModbusTcpTxBuf[7] == 0x0f) ? 0x0C : ((ModbusTcpTxBuf[7] < 0x80) ? 0x09 + ModbusTcpTxBuf[8] : 0x09);
       38:   39:    for (int i = 0; i < responseLength; i++)
       35:   40:        printf("%02X ", ModbusTcpTxBuf[i]);
        3:   41:    printf("\n");
        -:   42:
        -:   43:#endif
        -:   44:
        3:   45:    printf(Test_Res == 1 ? ANSI_COLOR_GREEN " Test Passed" : ANSI_COLOR_RED " Test failed\n");
        -:   46:
        3:   47:    if (ModbusTcpRxBuf[7] == 0x6 || ModbusTcpRxBuf[7] == 0x10 || ModbusTcpTxBuf[7] == 0x05 || ModbusTcpRxBuf[7] == 0x0f)
        1:   48:        printf(test_c == 1 ? ANSI_COLOR_RED " - Data not Entered" : ANSI_COLOR_GREEN " - Data Entered");
        -:   49:
        3:   50:    printf("\n");
        3:   51:    printf(ANSI_COLOR_RESET); // Reset color to default
        3:   52:}
